define(["jquery","core/config","core/log"],function(a,b,c){var d={init:function(){a("#id_shortname").bind("change",this.syncSchema),a("#id_testconnection").bind("click",this.opencnxpopup),a("#id_testdatapath").bind("click",this.opendatapathpopup),a("#id_mnet").bind("click",this.switcherservices),c.debug("AMD VMoodle Hostform initialized")},opencnxpopup:function(){var c=a("#id_vdbtype").val(),d=a("#id_vdbhost").val(),e=a("#id_vdblogin").val(),f=a("#id_vdbpass").val(),g=a("#id_vdbname").val(),h=b.wwwroot+"/local/vmoodle/views/management.testcnx.php?";h+="vdbtype="+c,h+="&vdbhost="+encodeURIComponent(d),h+="&vdblogin="+encodeURIComponent(e),h+="&vdbpass="+encodeURIComponent(f),h+="&vdbname="+encodeURIComponent(g);var i="width=500,height=300,toolbar=no,menubar=no,location=no,scrollbars=no,status=no",j=window.open(h,"",i);j.document.title="Vmoodle connexion test"},opendatapathpopup:function(){var c=a("#id_vdatapath").val(),d=b.wwwroot+"/local/vmoodle/views/management.testdatapath.php?";d+="dataroot="+escape(c);var e="width=500,height=300,toolbar=no,menubar=no,location=no,scrollbars=no,status=no",f=window.open(d,"",e);f.document.title="VMoodle test data path"},switcherservices:function(){var b=a(this),c=b.attr("data-subnet"),d=a("#id_multimnet"),e=a("#id_services"),f="0",g="default",h="subnetwork";d.val()===f||d.val()===c?(e.val(g),e.attr("disabled",!0)):(e.attr("disabled",!1),e.val(h))},syncSchema:function(){var b=a("#id_shortname"),c=a("#id_vdbname"),d=a("#id_vdatapath"),e=a("#id_vhostname");b.val(b.val().replace(/-/g,"_")),b.val(b.val().replace(/ /g,"_")),c.val(c.val().replace(/<%%INSTANCE%%>/g,b.val())),d.val(d.val().replace(/<%%INSTANCE%%>/g,b.val())),e.val(e.val().replace(/<%%INSTANCE%%>/g,b.val()))}};return d});