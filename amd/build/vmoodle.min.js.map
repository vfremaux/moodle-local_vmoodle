{"version":3,"file":"vmoodle.min.js","sources":["../src/vmoodle.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log'], function($, log) {\n\n    var vmoodle = {\n\n        vmoodlestrings: '',\n\n        init: function() {\n            $('.vmoodle-hide-show-image').bind('click', this.switch_panel);\n\n            // File area remote reader ajax binding.\n            $('#mform12 select[name=\"platform\"]').bind('change', this.remote_filearealist);\n\n            log.debug(\"AMD Vmoodle initialised \");\n        },\n\n        switch_panel: function() {\n\n            var that = $(this);\n\n            var handleid = that.attr('id');\n            var panelid = that.attr('id').replace('id-showctl-', '');\n            var handlesrc = that.attr('src');\n\n            // Make them all collapsed.\n            handlesrc = handlesrc.replace('collapsed', 'expanded');\n            $('.vmoodle-hide-show-image').attr('src', handlesrc);\n\n            // Reopen the clicked item.\n            handlesrc = handlesrc.replace('collapsed', 'expanded');\n            $('#' + handleid).attr('src', handlesrc);\n\n            // Close them all.\n            $('.vmoodlecmd-panel').addClass('vmoodle-hidden');\n\n            // Reopen the clicked item.\n            $('#id-vmoodlecmd-panel-' + panelid).removeClass('vmoodle-hidden');\n        },\n\n        filtercapabilitytable: function(filterinput) {\n            $('.capabilityrow').css('display', 'table-row');\n            if (filterinput.value !== '') {\n                $('.capabilityrow').css('display', 'none');\n                $('.capabilityrow[id*=\\'' + filterinput.value + '\\']').css('display', 'table-row');\n            }\n        },\n\n        remote_filearealist: function() {\n            var that = $(this);\n            var targeturl = that.val();\n            var targetdiv = $('#fitem_id_fileareaid .felement.fselect');\n\n            var url = targeturl + '/local/vmoodle/plugins/generic/ajax/get_system_fileareas.php';\n\n            // Reset the filearea choice list with target's local set.\n            $.get(url, function(data) {\n                targetdiv.html(data);\n            }, 'html');\n        }\n    };\n\n    return vmoodle;\n\n});"],"names":["define","$","log","vmoodlestrings","init","bind","this","switch_panel","remote_filearealist","debug","that","handleid","attr","panelid","replace","handlesrc","addClass","removeClass","filtercapabilitytable","filterinput","css","value","targeturl","val","targetdiv","url","get","data","html"],"mappings":"AAiBAA,OAAM,wBAAC,CAAC,SAAU,aAAa,SAASC,EAAGC,KA4DvC,MA1Dc,CAEVC,eAAgB,GAEhBC,KAAM,WACFH,EAAE,4BAA4BI,KAAK,QAASC,KAAKC,cAGjDN,EAAE,oCAAoCI,KAAK,SAAUC,KAAKE,qBAE1DN,IAAIO,MAAM,2BACb,EAEDF,aAAc,WAEV,IAAIG,KAAOT,EAAEK,MAETK,SAAWD,KAAKE,KAAK,MACrBC,QAAUH,KAAKE,KAAK,MAAME,QAAQ,cAAe,IACjDC,UAAYL,KAAKE,KAAK,OAG1BG,UAAYA,UAAUD,QAAQ,YAAa,YAC3Cb,EAAE,4BAA4BW,KAAK,MAAOG,WAG1CA,UAAYA,UAAUD,QAAQ,YAAa,YAC3Cb,EAAE,IAAMU,UAAUC,KAAK,MAAOG,WAG9Bd,EAAE,qBAAqBe,SAAS,kBAGhCf,EAAE,wBAA0BY,SAASI,YAAY,iBACpD,EAEDC,sBAAuB,SAASC,aAC5BlB,EAAE,kBAAkBmB,IAAI,UAAW,aACT,KAAtBD,YAAYE,QACZpB,EAAE,kBAAkBmB,IAAI,UAAW,QACnCnB,EAAE,uBAA0BkB,YAAYE,MAAQ,MAAOD,IAAI,UAAW,aAE7E,EAEDZ,oBAAqB,WACjB,IACIc,UADOrB,EAAEK,MACQiB,MACjBC,UAAYvB,EAAE,0CAEdwB,IAAMH,UAAY,+DAGtBrB,EAAEyB,IAAID,KAAK,SAASE,MAChBH,UAAUI,KAAKD,KAClB,GAAE,OACP,EAKR"}